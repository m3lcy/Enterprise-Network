
hostname l3-sw-01

enable secret cisco_l3_01

username admin secret cisco_l3_admin01

! ==== GLOBAL ====
banner motd Authorized Access Only!!!

service password-encryption

ip domain-name cisco.com

crypto key generate rsa usage-keys label ssh-key modulus 1024

! ==== IP ROUTING ====
ip routing

! ==== REMOTE ACCESS ====
line vty 0 4
 
 password vty_l3_01
 
 login local
 transport input ssh

! ==== VLANS ====
vlan 10
 name CORE
vlan 20
 name MGMT
vlan 30
 name COMPUTE
vlan 99
 name NATIVE
vlan 100
 name R&D
vlan 200
 name EMPLOYEE
vlan 300
 name GUEST
vlan 999
 name BLACKHOLE

! ==== VTP ====
vtp mode server
vtp domain BRANCH_NYC
 
vtp version 2

! ==== STP ====
spanning-tree mode pvst
spanning-tree vlan [10, 20, 30, 100, 200, 300] priority 24576

! ==== INTERFACES ====
interface FastEthernet0/1
      switchport trunk encapsulation dot1q
      switchport mode trunk
						switchport trunk native vlan 99
						no shutdown
interface FastEthernet0/2
      switchport trunk encapsulation dot1q
      switchport mode trunk
						no shutdown
interface FastEthernet0/3
      switchport trunk encapsulation dot1q
      switchport mode trunk
						no shutdown
interface FastEthernet0/5
      switchport trunk encapsulation dot1q
      switchport mode trunk
						switchport trunk native vlan 99
						no shutdown
    service-policy input VLAN30_POLICY
interface FastEthernet0/6
      switchport trunk encapsulation dot1q
      switchport mode trunk
						switchport trunk native vlan 99
						no shutdown
interface FastEthernet0/4
      switchport mode access
						switchport access vlan 999
						shutdown
interface FastEthernet0/7-24
      switchport mode access
						switchport access vlan 999
						shutdown
interface GigabitEthernet0/1
      no switchport
						ip address 172.16.12.225 255.255.255.252
						duplex auto
						speed auto
						no shutdown
interface GigabitEthernet0/2
      switchport trunk encapsulation dot1q
      switchport mode trunk
						switchport trunk native vlan 99
						no shutdown
interface VLAN1
						ip address 192.168.12.36 255.255.255.224
						no shutdown
interface VLAN10
						ip address 172.16.12.1 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
      standby 1 ip 172.16.12.254
      standby version 2
      standby 1 priority 150
      standby 1 preempt
interface VLAN20
						ip address 172.16.12.33 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
      standby 1 ip 172.16.12.254
      standby version 2
      standby 1 priority 150
      standby 1 preempt
interface VLAN30
						ip address 172.16.12.65 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
      standby 1 ip 172.16.12.254
      standby version 2
      standby 1 priority 150
      standby 1 preempt
    service-policy output VLAN30_POLICY
interface VLAN99
						ip address 172.16.12.97 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
      standby 1 ip 172.16.12.254
      standby version 2
      standby 1 priority 150
      standby 1 preempt
interface VLAN100
						ip address 172.16.12.129 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
interface VLAN200
						ip address 172.16.12.161 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside
interface VLAN300
						ip address 172.16.12.193 255.255.255.224
						no shutdown
    ip helper-address 172.16.12.226
    ip nat inside

! ==== NAT ====

! ==== DHCP ====

! ==== ROUTING PROTOCOLS ====
router ospf 1
 router-id 2.2.2.2
 log-adjacency-changes
 network 172.16.12.0 0.0.0.31 area 0
 network 172.16.12.32 0.0.0.31 area 0
 network 172.16.12.64 0.0.0.31 area 0
 network 172.16.12.96 0.0.0.31 area 0
 network 172.16.12.128 0.0.0.31 area 0
 network 172.16.12.160 0.0.0.31 area 0
 network 172.16.12.192 0.0.0.31 area 0
 network 172.16.12.224 0.0.0.31 area 0
router rip
 version 2
 network 172.16.0.0
 no auto-summary

! ==== QOS ====
mls qos

! ==== ACL ====
ip access-list extended VLAN30_ACL
 permit ip 172.16.12.64 0.0.0.31 any

! ==== DEFAULT GATEWAY ====

end
